{% extends "dashboard/base_dashboard.html" %}
{% load static %}

{% block title %}Interview Details{% endblock %}
{% block page_title %}Interview Details{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/interview.css' %}">
{% endblock %}

{% block content %}
<div class="interview-page">

    <!-- Interview Header Card -->
    <div class="card interview-header">
        <div class="interview-header-gradient"></div>
        <div class="card-body">
            <div class="interview-header-content">
                <div>
                    <span class="status-badge interview">
                        <i class="fas fa-calendar-check"></i> Interview Scheduled
                    </span>
                    <h2 class="job-title">{{ application.job.title }}</h2>
                    <p class="job-meta">
                        <i class="fas fa-building"></i>
                        {{ application.job.department|default:"Company" }}
                        <span class="job-meta-separator">|</span>
                        <i class="fas fa-map-marker-alt"></i>
                        {{ application.job.location|default:"Remote" }}
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Interview Schedule Card -->
    <div class="card interview-schedule-card">
        <div class="card-header">
            <h3><i class="fas fa-clock"></i> Interview Schedule</h3>
        </div>
        <div class="card-body">
            <div class="interview-datetime">
                <div class="interview-datetime-label">Scheduled For</div>
                <div class="interview-datetime-date">
                    {{ application.interview_scheduled_at|date:"l, F d, Y" }}
                </div>
                <div class="interview-datetime-time">
                    {{ application.interview_scheduled_at|time:"g:i A" }}
                </div>
            </div>

            <!-- Meeting Link Section -->
            <div class="meeting-section">
                <div class="meeting-platform-row">
                    {% if application.interview_platform %}
                    <span class="platform-badge platform-{{ application.interview_platform|lower|cut:' ' }}">
                        <i class="fas fa-video"></i> {{ application.interview_platform }}
                    </span>
                    {% else %}
                    <span class="platform-badge">
                        <i class="fas fa-video"></i> Video Call
                    </span>
                    {% endif %}
                </div>

                <div class="meeting-actions">
                    <a href="{{ application.interview_meeting_link }}"
                       target="_blank"
                       rel="noopener noreferrer"
                       class="btn-join">
                        <i class="fas fa-external-link-alt"></i> Join Meeting
                    </a>
                    <button type="button"
                            class="btn-copy"
                            data-link="{{ application.interview_meeting_link }}">
                        <i class="fas fa-copy"></i> Copy Link
                    </button>
                </div>

                <p class="meeting-helper-text">
                    <i class="fas fa-info-circle"></i>
                    Click "Join Meeting" at the scheduled time to connect with the interviewer
                </p>
            </div>
        </div>
    </div>

    {% if application.interview_notes %}
    <!-- Interview Instructions Card -->
    <div class="card interview-instructions-card">
        <div class="card-header">
            <h3><i class="fas fa-info-circle"></i> Interview Instructions</h3>
        </div>
        <div class="card-body">
            <div class="interview-instructions-text">{{ application.interview_notes }}</div>
        </div>
    </div>
    {% endif %}

    <!-- Preparation Tips Card -->
    <div class="card interview-tips-card">
        <div class="card-header">
            <h3><i class="fas fa-lightbulb"></i> Preparation Tips</h3>
        </div>
        <div class="card-body">
            <ul class="tips-list">
                <li>
                    <i class="fas fa-check-circle"></i>
                    <span>Test your camera, microphone, and internet connection before the interview</span>
                </li>
                <li>
                    <i class="fas fa-check-circle"></i>
                    <span>Join 5 minutes early to ensure everything is working properly</span>
                </li>
                <li>
                    <i class="fas fa-check-circle"></i>
                    <span>Find a quiet, well-lit space with a professional background</span>
                </li>
                <li>
                    <i class="fas fa-check-circle"></i>
                    <span>Have your resume and the job description ready for reference</span>
                </li>
                <li>
                    <i class="fas fa-check-circle"></i>
                    <span>Prepare questions to ask about the role and company</span>
                </li>
            </ul>
        </div>
    </div>

    <!-- Back Navigation -->
    <div class="interview-back-nav">
        <a href="{% url 'applications:my_applications' %}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to My Applications
        </a>
    </div>

</div>

<!-- Toast notification container -->
<div id="toast-container"></div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/interview.js' %}"></script>
{% endblock %}
